;/*!douyin_falcon:component/hot_video/hot_video.js*/
__M.define("douyin_falcon:component/hot_video/hot_video",function(require,exports,module){"";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function report(e){for(var t=$(".hot-video-item"),a=t.length,o=reportedVideo;a>o;o++)if(t.eq(o).offset().top<parseInt($(window).height())+parseInt($(window).scrollTop())){var n=t.eq(o).attr("data-id"),i={code_id:e.awemeCodeId,group_id:n,distance:o+1};e.ttReportData&&e.ttReportData.sendImpressionLog(i),reportedVideo=o+1}}function bind(e){$("#pageletHotVideo").on("click",".hot-video-item",function(t){var a=e.reportParams,o=$(this).attr("data-id"),n=parseInt($(this).attr("data-distance")),i=e.onClick;if(i&&"function"==typeof i&&i.call(this,t),a){if(a.awemeCodeId)var r={code_id:a.awemeCodeId,group_id:o,distance:n};a.ttReportData&&a.ttReportData.sendClickLog(r)}if("sessionStorage"in window){var d=sessionStorage.getItem("com.aweme.reflow-"+e.sessionTag+"-count")||1;if(d=parseInt(d,10),!(HOT_DOWNLOAD_CLICK_LIMIT>d)){if(ga.gaevent("reflow_"+e.sessionTag,"download_feature",o),e.teaLogger&&e.teaLogger.send("tap",{type:"download_feature",target:"hot_list_item"}),a){if(a.awemeCodeId)var s={code_id:a.awemeCodeId,group_id:o,distance:n},_="wap_activation",l={},p={};a.ttReportData&&(l=a.ttReportData.getExtraData({params:s,type:_}),p=a.ttReportData.getGDEXTJSON({code_id:a.awemeCodeId,distance:n}))}var u="click_wap_detail_download_feature";return $.browser.weixin&&(u="click_weixin_detail_download_feature"),downloadAction.downloadApp(e.dl,{type:"detail",params:{id:o,gd_label:u,appParam:p?encodeURIComponent(JSON.stringify(p)):"",needlaunchlog:p?1:0},extra:l?l:""}),!1}ga.gaevent("reflow_"+e.sessionTag,"feature",o),e.teaLogger&&e.teaLogger.send("tap",{type:"feature",target:"hot_list_item"});try{sessionStorage.setItem("com.aweme.reflow-"+e.sessionTag+"-count",++d)}catch(c){}}}),e.reportParams&&(report(e.reportParams),$(window).on("scroll",_lodash.default.debounce(function(){report(e.reportParams)},300)))}function getVideos(e){var t=e.count||6,a=[];$("#loadingVideoTip").removeClass("hidden"),e.teaLogger.send("list_load",{target:"hot_video",type:"video",event_type:"request_num",value_num:t});var o=Date.now();$.ajax({url:e.api,dataType:"JSON",type:"get",data:{app_id:1128,cursor:0,count:t,parent_rid:e.reportParams?e.reportParams.parent_rid:"",aweme_id:e.reportParams?e.reportParams.aweme_id:"",_signature:e.reportParams?e.reportParams._signature:"",whale_id:e.reportParams?e.reportParams.whale_id:""},timeout:5e3,success:function(t){var n=JSON.parse(t);if(0!=n.status_code)return void e.teaLogger.send("list_load",{target:"hot_video",event_type:"status_code_not_0",value_num:n.status_code});a=n.aweme_list;var i=Date.now();e.filterCallback&&(a=e.filterCallback(a)),a.length>1&&a.length%2!=0&&a.pop(),$("#loadingVideoTip").addClass("hidden"),$("#videoListNode").removeClass("hidden").empty().append(HOT_VIDEO({title:e.title||"今日热门推荐",data:a,type:e.type})),$("#moreVideo").removeClass("hidden"),bind(e),e.cb&&e.cb(),e.teaLogger.send("list_load",{target:"hot_video",event_type:"duration",value_num:i-o}),e.teaLogger.send("list_load",{target:"hot_video",event_type:"response_num",value_num:a.length})},error:function(){$("#pageletHotVideo").hide(),$("#moreVideo").removeClass("hidden"),e.teaLogger.send("list_load",{target:"hot_video",event_type:"error"})}})}var _lodash=_interopRequireDefault(require("douyin_falcon:node_modules/lodash/lodash")),downloadAction=(require("douyin_falcon:common/util/number"),require("douyin_falcon:common/download_sdk/download_sdk")),ga=(require("douyin_falcon:common/util/storage"),require("douyin_falcon:common/ga/ga")),HOT_VIDEO=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="header">\n    <span class="title">'+(null==(__t=title)?"":__t)+'</span>\n</div>\n<ul class="video-list clearfix">\n    ',_.each(data,function(e,t){__p+='\n    <li>\n        <a  href="/share/video/'+(null==(__t=e.aweme_id)?"":__t)+'"  class="hot-video-item" data-distance="'+(null==(__t=t+1)?"":__t)+'" data-id="'+(null==(__t=e.aweme_id)?"":__t)+'">\n            <div class="cover lazy" data-src="'+(null==(__t=e.video.cover.url_list[0])?"":__t)+'">\n                <div class="mask"></div>\n                <span class="play-btn"></span>\n                ',"challenge"===type?(__p+='\n                    <div class="ch\n                    allenge-info">\n                    ',__p+=e.author&&e.author.avatar_medium?'\n                        <span class="icon" style="background-image: url('+(null==(__t=e.author.avatar_medium.url_list&&e.author.avatar_medium.url_list[0])?"":__t)+')"></span>\n                    ':'\n                        <span class="icon"></span>\n                    ',__p+='\n                        <div class="info">\n                            ',e.cha_list&&e.cha_list.length&&(__p+='\n                            <p class="name">#'+(null==(__t=e.cha_list[0].cha_name)?"":__t)+"</p>\n                            "),__p+="\n                            ",e.statistics&&e.statistics.play_count&&(__p+="\n                            "),__p+="\n                        </div>\n                    </div>\n                "):(__p+='\n                    <div class="music-info">\n                        ',__p+=e.author&&e.author.avatar_medium?'\n                        <span class="icon" style="background-image: url('+(null==(__t=e.author.avatar_medium.url_list&&e.author.avatar_medium.url_list[0])?"":__t)+')"></span>\n                        ':'\n                            <span class="icon"></span>\n                        ',__p+='\n\n                        <div class="info">\n                            ',e.music&&e.music.music_name&&(__p+='\n                            <p class="name">'+(null==(__t=e.music.music_name)?"":__t)+"</p>\n                            "),__p+="\n                            ",e.statistics&&e.statistics.play_count&&(__p+="\n                            "),__p+="\n                        </div>\n                    </div>\n                "),__p+="\n            </div>\n        </a>\n    </li>\n    "}),__p+="\n</ul>\n";return __p},HOT_DOWNLOAD_CLICK_LIMIT=0,reportedVideo=0;module.exports={init:function(e){getVideos(e)}}});
;/*!douyin_falcon:component/tips/index.js*/
__M.define("douyin_falcon:component/tips/index",function(require,exports,module){"";var tpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="pagelet-tips">'+(null==(__t=tips)?"":__t)+"</div>\n";return __p};exports.show=function(t,o,e){var n=o||2e3,i=500;e=e||$("body");var p=tpl({tips:t}),s=$(p);s.appendTo($(e)),setTimeout(function(){s.addClass("show")},20),setTimeout(function(){s.addClass("removing"),setTimeout(function(){s.remove()},i)},n)}});